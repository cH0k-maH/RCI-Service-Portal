<!-- MANAGE STAFF -->

<div class="space-y-6">

    <!-- HEADER & CONTROLS -->
    <div class="flex flex-col md:flex-row justify-between items-center gap-4">
        <h2 class="text-xl font-semibold">Manage Staff</h2>

        <div class="flex flex-col md:flex-row gap-3 w-full md:w-auto">
            <!-- Search -->
            <div class="relative">
                <input type="text" id="user-search" placeholder="Search staff..."
                    class="pl-10 pr-4 py-2 border rounded-lg focus:ring-red-600 focus:border-red-600 w-full md:w-64">
                <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
            </div>

            <!-- Filter by Branch (Can be hidden by JS) -->
            <select id="branch-filter"
                class="border rounded-lg px-3 py-2 focus:ring-red-600 focus:border-red-600 bg-white">
                <option value="">All Branches</option>
                <option value="Lagos">Lagos</option>
                <option value="Abuja">Abuja</option>
                <option value="Port Harcourt">Port Harcourt</option>
            </select>

            <!-- Add Button -->
            <button id="addUserBtn"
                class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 shadow flex items-center justify-center">
                <i class="fas fa-plus mr-2"></i> Add Staff
            </button>
        </div>
    </div>

    <!-- USERS TABLE -->
    <div class="bg-white rounded-lg shadow overflow-hidden">
        <div class="overflow-x-auto">
            <table class="min-w-full text-sm divide-y divide-gray-200">
                <thead class="bg-gray-50">
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                            Identity</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Role
                        </th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                            Contacts</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                            Branch</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                            Status</th>
                        <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">
                            Actions</th>
                    </tr>
                </thead>
                <tbody id="users-table-body" class="bg-white divide-y divide-gray-200">
                    <!-- Rows will be injected by JS -->
                </tbody>
            </table>
        </div>
        <!-- Empty State -->
        <div id="no-users-msg" class="hidden p-8 text-center text-gray-500">
            No staff found matching your criteria.
        </div>
    </div>

</div>

<!-- USER MODAL (Hidden) -->
<div id="user-modal-overlay"
    class="hidden fixed inset-0 bg-black/50 z-50 flex items-center justify-center overflow-y-auto pt-10 pb-10">
    <div class="bg-white rounded-xl shadow-2xl w-full max-w-2xl mx-4 relative animate-fadeIn my-auto">

        <!-- Header -->
        <div
            class="bg-gray-50 px-6 py-4 border-b border-gray-200 flex justify-between items-center sticky top-0 z-10 rounded-t-xl">
            <h3 id="modal-title" class="text-xl font-bold text-gray-800">Add New Staff</h3>
            <button id="close-user-modal" class="text-gray-400 hover:text-red-600 text-2xl transition">&times;</button>
        </div>

        <!-- Form -->
        <form id="user-form" class="p-6 space-y-6 max-h-[80vh] overflow-y-auto">
            <input type="hidden" id="user-id">

            <!-- MASTER SELECTOR: Account Type (Hidden for Staff Page usually) -->
            <div class="bg-blue-50 p-4 rounded-lg border border-blue-100 hidden">
                <label class="block text-sm font-bold text-blue-900 mb-1">Select Account Type</label>
                <select id="account-type-selector"
                    class="w-full border-blue-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 px-3 py-2 bg-white font-medium text-blue-800">
                    <option value="staff" selected>Staff (Internal)</option>
                </select>
            </div>

            <!-- ================= FORM: STAFF ================= -->
            <div id="form-section-staff" class="space-y-4">
                <h4 class="text-sm font-semibold text-gray-500 uppercase tracking-wider border-b pb-1">Staff Information
                </h4>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Full Name</label>
                        <input type="text" id="staff-name" required
                            class="mt-1 w-full border-gray-300 rounded-lg shadow-sm focus:ring-red-600 focus:border-red-600 px-3 py-2">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Email (Username)</label>
                        <input type="email" id="staff-email" required
                            class="mt-1 w-full border-gray-300 rounded-lg shadow-sm focus:ring-red-600 focus:border-red-600 px-3 py-2">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Phone Number</label>
                        <input type="tel" id="staff-phone"
                            class="mt-1 w-full border-gray-300 rounded-lg shadow-sm focus:ring-red-600 focus:border-red-600 px-3 py-2">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Staff ID (Optional)</label>
                        <input type="text" id="staff-id"
                            class="mt-1 w-full border-gray-300 rounded-lg shadow-sm focus:ring-red-600 focus:border-red-600 px-3 py-2">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Role</label>
                        <select id="staff-role"
                            class="mt-1 w-full border-gray-300 rounded-lg shadow-sm focus:ring-red-600 focus:border-red-600 px-3 py-2">
                            <option value="Admin">Admin</option>
                            <option value="Manager">Regional Manager</option>
                            <option value="Engineer">Engineer</option>
                            <option value="Sales">Sales Staff</option>
                            <option value="Secretary">Secretary</option>
                            <option value="Logistics">Logistics / Driver</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Branch</label>
                        <select id="staff-branch"
                            class="mt-1 w-full border-gray-300 rounded-lg shadow-sm focus:ring-red-600 focus:border-red-600 px-3 py-2">
                            <option value="Lagos">Lagos</option>
                            <option value="Abuja">Abuja</option>
                            <option value="Port Harcourt">Port Harcourt</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Hidden other sections just in case JS tries to toggle them, though unlikely -->
            <div id="form-section-dealer" class="hidden"></div>
            <div id="form-section-customer" class="hidden"></div>

            <!-- ================= COMMON: STATUS ================= -->
            <div class="pt-4 border-t border-gray-200">
                <label class="block text-sm font-medium text-gray-700 mb-1">Account Status</label>
                <select id="common-status"
                    class="w-full md:w-1/2 border-gray-300 rounded-lg shadow-sm focus:ring-red-500 focus:border-red-500 px-3 py-2 bg-white">
                    <option value="Active">Active</option>
                    <option value="Suspended">Suspended</option>
                    <option value="Pending">Pending (On Hold)</option>
                </select>
            </div>

            <!-- Common Notes -->
            <div class="pt-4">
                <label class="block text-sm font-medium text-gray-700 mb-1">Notes</label>
                <textarea id="common-notes" rows="2"
                    class="w-full border-gray-300 rounded-lg shadow-sm px-3 py-2"></textarea>
            </div>

            <!-- Footer Buttons -->
            <div
                class="pt-4 flex justify-end space-x-3 bg-gray-50 -mx-6 -mb-6 px-6 py-4 rounded-b-xl sticky bottom-0 border-t border-gray-200">
                <button type="button" id="cancel-user-modal"
                    class="px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition">Cancel</button>
                <button type="submit"
                    class="px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 shadow-md transition transform hover:scale-105">Save
                    Staff</button>
            </div>
        </form>
    </div>
</div>